!function(e){e.fn.metrojs={capabilities:null,checkCapabilities:function(t,n){return(null==e.fn.metrojs.capabilities||"undefined"!=typeof n&&1==n)&&(e.fn.metrojs.capabilities=new e.fn.metrojs.MetroModernizr(t)),e.fn.metrojs.capabilities}};var t=e.fn.metrojs,n=window.console;"object"!=typeof n&&(n={},n.log=function(){},n.error=function(){});var a="function"==typeof e.error?e.error:n.error,i=99e3;e.fn.liveTile=function(t){if(o[t]){for(var n=[],a=1;a<=arguments.length;a++)n[a-1]=arguments[a];return o[t].apply(this,n)}return"object"!=typeof t&&t?(e.error("Method "+t+" does not exist on jQuery.liveTile"),null):o.init.apply(this,arguments)},e.fn.liveTile.contentModules={modules:[],addContentModule:function(e,t){this.modules instanceof Array||(this.modules=[]),this.modules.push(t)},hasContentModule:function(e){if("undefined"==typeof e||!(this.modules instanceof Array))return-1;for(var t=0;t<this.modules.length;t++)if("undefined"!=typeof this.modules[t].moduleName&&this.modules[t].moduleName==e)return t;return-1}},e.fn.liveTile.defaults={mode:"slide",speed:500,initDelay:-1,delay:5e3,stops:"100%",stack:!1,direction:"vertical",animationDirection:"forward",tileSelector:">div,>li,>p,>img,>a",tileFaceSelector:">div,>li,>p,>img,>a",ignoreDataAttributes:!1,click:null,link:"",newWindow:!1,bounce:!1,bounceDirections:"all",bounceFollowsMove:!0,pauseOnHover:!1,pauseOnHoverEvent:"both",playOnHover:!1,playOnHoverEvent:"both",onHoverDelay:0,onHoverOutDelay:200,repeatCount:-1,appendBack:!0,alwaysTrigger:!1,flipListOnHover:!1,flipListOnHoverEvent:"mouseout",noHAflipOpacity:"1",haTransFunc:"ease",noHaTransFunc:"linear",currentIndex:0,startNow:!0,useModernizr:"undefined"!=typeof window.Modernizr,useHardwareAccel:!0,useTranslate:!0,faces:{$front:null,$back:null},animationStarting:function(){},animationComplete:function(){},triggerDelay:function(){return 3e3*Math.random()},swap:"",swapFront:"-",swapBack:"-",contentModules:[],rebindMessage:"tile data is missing. Are you missing a call to rebind or destroy? You may also be able to avoid this error by calling stop or pause"};var o={init:function(n){var a=e.extend({},e.fn.liveTile.defaults,n);return t.checkCapabilities(a),s.getBrowserPrefix(),-1==e.fn.liveTile.contentModules.hasContentModule("image")&&e.fn.liveTile.contentModules.addContentModule("image",l.imageSwap),-1==e.fn.liveTile.contentModules.hasContentModule("html")&&e.fn.liveTile.contentModules.addContentModule("html",l.htmlSwap),e(this).each(function(t,n){var i=e(n),o=r.initTileData(i,a);o.faces=r.prepTile(i,o),o.fade=function(e){r.fade(i,e)},o.slide=function(e){r.slide(i,e)},o.carousel=function(e){r.carousel(i,e)},o.flip=function(e){r.flip(i,e)},o.flipList=function(e){r.flipList(i,e)};var s={fade:o.fade,slide:o.slide,carousel:o.carousel,flip:o.flip,"flip-list":o.flipList};o.doAction=function(e){var t=s[o.mode];"function"==typeof t&&(t(e),o.hasRun=!0),e==o.timer.repeatCount&&(o.runEvents=!1)},o.timer=new e.fn.metrojs.TileTimer(o.delay,o.doAction,o.repeatCount),i.data("LiveTile",o),("flip-list"!==o.mode||0==o.flipListOnHover)&&(o.pauseOnHover?r.bindPauseOnHover(i):o.playOnHover&&r.bindPlayOnHover(i,o)),(o.link.length>0||"function"==typeof o.click)&&i.css({cursor:"pointer"}).bind("click.liveTile",function(e){var t=!0;"function"==typeof o.click&&(t=o.click(i,o)||!1),t&&o.link.length>0&&(e.preventDefault(),o.newWindow?window.open(o.link):window.location=o.link)}),r.bindBounce(i,o),o.startNow&&"none"!=o.mode&&(o.runEvents=!0,o.timer.start(o.initDelay))})},"goto":function(t){var n,a=typeof t;if("undefined"===a&&(n={index:-99,delay:0,autoAniDirection:!1}),"number"!==a&&isNaN(t)){if("string"===a)if("next"==t)n={index:-99,delay:0};else{if(0!==t.indexOf("prev"))return e.error(t+' is not a recognized action for .liveTile("goto")'),e(this);n={index:-100,delay:0}}else if("object"===a){"undefined"==typeof t.delay&&(t.delay=0);var i=typeof t.index;"undefined"===i?t.index=0:"string"===i&&("next"===t.index?t.index=-99:0===t.index.indexOf("prev")&&(t.index=-100)),n=t}}else n={index:parseInt(t,10),delay:0};return e(this).each(function(t,a){var i=e(a),o=i.data("LiveTile"),r=i.data("metrojs.tile"),s=n.index;if(r.animating===!0)return e(this);if("carousel"===o.mode){var l=o.faces.$listTiles.filter(".active"),c=o.faces.$listTiles.index(l);if(-100===s?(("undefined"==typeof n.autoAniDirection||1==n.autoAniDirection)&&(o.tempValues.animationDirection="undefined"==typeof n.animationDirection?"backward":n.animationDirection),s=0===c?o.faces.$listTiles.length-1:c-1):-99===s&&(("undefined"==typeof n.autoAniDirection||1==n.autoAniDirection)&&(o.tempValues.animationDirection="undefined"==typeof n.animationDirection?"forward":n.animationDirection),s=c+1),c==s)return;"undefined"!=typeof n.direction&&(o.tempValues.direction=n.direction),"undefined"!=typeof n.animationDirection&&(o.tempValues.animationDirection=n.animationDirection),o.currentIndex=0==s?o.faces.$listTiles.length:s-1}else o.currentIndex=s;o.runEvents=!0,o.timer.start(n.delay>=0?n.delay:o.delay)})},play:function(t){var n,a=typeof t;return"undefined"===a?n={delay:-1}:"number"===a?n={delay:t}:"object"===a&&("undefined"==typeof t.delay&&(t.delay=-1),n=t),e(this).each(function(t,a){var i=e(a),o=i.data("LiveTile");o.runEvents=!0,n.delay<0&&!o.hasRun&&(n.delay=o.initDelay),o.timer.start(n.delay>=0?n.delay:o.delay)})},animate:function(){return e(this).each(function(t,n){var a=e(n),i=a.data("LiveTile");i.doAction()})},stop:function(){return e(this).each(function(t,n){var a=e(n),i=a.data("LiveTile");i.hasRun=!1,i.runEvents=!1,i.timer.stop(),window.clearTimeout(i.eventTimeout),window.clearTimeout(i.flCompleteTimeout),window.clearTimeout(i.completeTimeout),"flip-list"===i.mode&&i.faces.$listTiles.each(function(t,n){var a=e(n).data("metrojs.tile");window.clearTimeout(a.eventTimeout),window.clearTimeout(a.flCompleteTimeout),window.clearTimeout(a.completeTimeout)})})},pause:function(){return e(this).each(function(t,n){var a=e(n),i=a.data("LiveTile");i.timer.pause(),i.runEvents=!1,window.clearTimeout(i.eventTimeout),window.clearTimeout(i.flCompleteTimeout),window.clearTimeout(i.completeTimeout),"flip-list"===i.mode&&i.faces.$listTiles.each(function(t,n){var a=e(n).data("metrojs.tile");window.clearTimeout(a.eventTimeout),window.clearTimeout(a.flCompleteTimeout),window.clearTimeout(a.completeTimeout)})})},restart:function(t){var n,a=typeof t;return"undefined"===a?n={delay:-1}:"number"===a?n={delay:t}:"object"===a&&("undefined"==typeof t.delay&&(t.delay=-1),n=t),e(this).each(function(t,a){var i=e(a),o=i.data("LiveTile");n.delay<0&&!o.hasRun&&(n.delay=o.initDelay),o.hasRun=!1,o.runEvents=!0,o.timer.restart(n.delay>=0?n.delay:o.delay)})},rebind:function(t){return e(this).each(function(e,n){"undefined"!=typeof t?("undefined"!=typeof t.timer&&null!=t.timer&&t.timer.stop(),t.hasRun=!1,o.init.apply(n,[t])):o.init.apply(n,[{}])})},destroy:function(t){var n,a=typeof t;return"undefined"===a?n={removeCss:!1}:"boolean"===a?n={removeCss:t}:"object"===a&&("undefined"==typeof t.removeCss&&(t.removeCss=!1),n=t),e(this).each(function(t,a){var i=e(a),o=i.data("LiveTile");if("undefined"!=typeof o){i.unbind(".liveTile");var l=s.appendStyleProperties({margin:"",cursor:""},["transform","transition"],["",""]);o.timer.stop(),window.clearTimeout(o.eventTimeout),window.clearTimeout(o.flCompleteTimeout),window.clearTimeout(o.completeTimeout),null!=o.faces.$listTiles&&o.faces.$listTiles.each(function(t,a){var i=e(a);if("flip-list"===o.mode){var s=i.data("metrojs.tile");window.clearTimeout(s.eventTimeout),window.clearTimeout(s.flCompleteTimeout),window.clearTimeout(s.completeTimeout)}else if("carousel"===o.mode){var c=o.listData[t];c.bounce&&r.unbindMsBounce(i,c)}n.removeCss?(i.removeClass("ha"),i.find(o.tileFaceSelector).unbind(".liveTile").removeClass("bounce flip-front flip-back ha slide slide-front slide-back").css(l)):i.find(o.tileFaceSelector).unbind(".liveTile"),i.removeData("metrojs.tile")}).unbind(".liveTile"),null!=o.faces.$front&&n.removeCss&&o.faces.$front.removeClass("flip-front flip-back ha slide slide-front slide-back").css(l),null!=o.faces.$back&&n.removeCss&&o.faces.$back.removeClass("flip-front flip-back ha slide slide-front slide-back").css(l),o.bounce&&r.unbindMsBounce(i,o),o.playOnHover&&r.unbindMsPlayOnHover(i,o),o.pauseOnhover&&r.unbindMsPauseOnHover(i,o),i.removeClass("ha"),i.removeData("LiveTile"),i.removeData("metrojs.tile"),o=null}})}},r={dataAtr:function(e,t,n){return"undefined"!=typeof e.attr("data-"+t)?e.attr("data-"+t):n},dataMethod:function(e,t,n){return"undefined"!=typeof e.data(t)?e.data(t):n},getDataOrDefault:null,initTileData:function(n,a){var i=0==a.ignoreDataAttributes,o=null;null==this.getDataOrDefault&&(this.getDataOrDefault=t.capabilities.isOldJQuery?this.dataAtr:this.dataMethod),o=i?{speed:this.getDataOrDefault(n,"speed",a.speed),delay:this.getDataOrDefault(n,"delay",a.delay),stops:this.getDataOrDefault(n,"stops",a.stops),stack:this.getDataOrDefault(n,"stack",a.stack),mode:this.getDataOrDefault(n,"mode",a.mode),direction:this.getDataOrDefault(n,"direction",a.direction),useHardwareAccel:this.getDataOrDefault(n,"ha",a.useHardwareAccel),repeatCount:this.getDataOrDefault(n,"repeat",a.repeatCount),swap:this.getDataOrDefault(n,"swap",a.swap),appendBack:this.getDataOrDefault(n,"appendback",a.appendBack),currentIndex:this.getDataOrDefault(n,"start-index",a.currentIndex),animationDirection:this.getDataOrDefault(n,"ani-direction",a.animationDirection),startNow:this.getDataOrDefault(n,"start-now",a.startNow),tileSelector:this.getDataOrDefault(n,"tile-selector",a.tileSelector),tileFaceSelector:this.getDataOrDefault(n,"face-selector",a.tileFaceSelector),bounce:this.getDataOrDefault(n,"bounce",a.bounce),bounceDirections:this.getDataOrDefault(n,"bounce-dir",a.bounceDirections),bounceFollowsMove:this.getDataOrDefault(n,"bounce-follows",a.bounceFollowsMove),click:this.getDataOrDefault(n,"click",a.click),link:this.getDataOrDefault(n,"link",a.link),newWindow:this.getDataOrDefault(n,"new-window",a.newWindow),alwaysTrigger:this.getDataOrDefault(n,"always-trigger",a.alwaysTrigger),flipListOnHover:this.getDataOrDefault(n,"flip-onhover",a.flipListOnHover),pauseOnHover:this.getDataOrDefault(n,"pause-onhover",a.pauseOnHover),playOnHover:this.getDataOrDefault(n,"play-onhover",a.playOnHover),onHoverDelay:this.getDataOrDefault(n,"hover-delay",a.onHoverDelay),onHoverOutDelay:this.getDataOrDefault(n,"hoverout-delay",a.onHoverOutDelay),noHAflipOpacity:this.getDataOrDefault(n,"flip-opacity",a.noHAflipOpacity),useTranslate:this.getDataOrDefault(n,"use-translate",a.useTranslate),runEvents:!1,isReversed:!1,loopCount:0,contentModules:[],listData:[],height:n.height(),width:n.width(),tempValues:{}}:e.extend(!0,{runEvents:!1,isReversed:!1,loopCount:0,contentModules:[],listData:[],height:n.height(),width:n.width(),tempValues:{}},a),o.useTranslate=o.useTranslate&&o.useHardwareAccel&&t.capabilities.canTransform&&t.capabilities.canTransition,o.margin="vertical"===o.direction?o.height/2:o.width/2,o.stops="object"==typeof a.stops&&a.stops instanceof Array?a.stops:(""+o.stops).split(","),1===o.stops.length&&o.stops.push("0px");var s=o.swap instanceof Array?o.swap:o.swap.replace(" ","").split(","),l=i?this.getDataOrDefault(n,"swap-front",a.swapFront):a.swapFront,c=i?this.getDataOrDefault(n,"swap-back",a.swapBack):a.swapBack;o.swapFront=l instanceof Array?l:"-"===l?s:l.replace(" ","").split(","),o.swapBack=c instanceof Array?c:"-"===c?s:c.replace(" ","").split(",");var d;for(d=0;d<o.swapFront.length;d++)o.swapFront[d].length>0&&-1===e.inArray(o.swapFront[d],s)&&s.push(o.swapFront[d]);for(d=0;d<o.swapBack.length;d++)o.swapBack[d].length>0&&-1===e.inArray(o.swapBack[d],s)&&s.push(o.swapBack[d]);for(o.swap=s,d=0;d<s.length;d++)if(s[d].length>0){var u=e.fn.liveTile.contentModules.hasContentModule(s[d]);u>-1&&o.contentModules.push(e.fn.liveTile.contentModules.modules[u])}o.initDelay=i?this.getDataOrDefault(n,"initdelay",a.initDelay):a.initDelay,o.delay<-1?o.delay=a.triggerDelay(1):o.delay<0&&(o.delay=3500+4501*Math.random()),o.initDelay<0&&(o.initDelay=o.delay);var p={};for(d=0;d<o.contentModules.length;d++)e.extend(p,o.contentModules[d].data);e.extend(p,a,o);var f;for("flip-list"===p.mode?(f=n.find(p.tileSelector).not(".tile-title"),f.each(function(t,n){var a=e(n),o={direction:i?r.getDataOrDefault(a,"direction",p.direction):p.direction,newWindow:i?r.getDataOrDefault(a,"new-window",!1):!1,link:i?r.getDataOrDefault(a,"link",""):"",faces:{$front:null,$back:null},height:a.height(),width:a.width(),isReversed:!1};o.margin="vertical"===o.direction?o.height/2:o.width/2,p.listData.push(o)})):"carousel"===p.mode&&(p.stack=!0,f=n.find(p.tileSelector).not(".tile-title"),f.each(function(t,n){var a=e(n),o={bounce:i?r.getDataOrDefault(a,"bounce",!1):!1,bounceDirections:i?r.getDataOrDefault(a,"bounce-dir","all"):"all",link:i?r.getDataOrDefault(a,"link",""):"",newWindow:i?r.getDataOrDefault(a,"new-window",!1):!1,animationDirection:i?r.getDataOrDefault(a,"ani-direction",""):"",direction:i?r.getDataOrDefault(a,"direction",""):""};p.listData.push(o)})),d=0;d<o.contentModules.length;d++)"function"==typeof p.contentModules[d].initData&&p.contentModules[d].initData(p,n);return o=null,p},prepTile:function(n,a){n.addClass(a.mode);var o,l,c,d,u={$tileFaces:null,$listTiles:null,$front:null,$back:null};switch(a.mode){case"fade":u.$tileFaces=n.find(a.tileFaceSelector).not(".tile-title"),u.$front=null!=a.faces.$front&&a.faces.$front.length>0?a.faces.$front.addClass("fade-front"):u.$tileFaces.filter(":first").addClass("fade-front"),u.$back=null!=a.faces.$back&&a.faces.$back.length>0?a.faces.$back.addClass("fade-back"):u.$tileFaces.length>1?u.$tileFaces.filter(":last").addClass("fade-back"):a.appendBack?e('<div class="fade-back"></div>').appendTo(n):e("<div></div>");break;case"slide":if(u.$tileFaces=n.find(a.tileFaceSelector).not(".tile-title"),u.$front=null!=a.faces.$front&&a.faces.$front.length>0?a.faces.$front.addClass("slide-front"):u.$tileFaces.filter(":first").addClass("slide-front"),u.$back=null!=a.faces.$back&&a.faces.$back.length>0?a.faces.$back.addClass("slide-back"):u.$tileFaces.length>1?u.$tileFaces.filter(":last").addClass("slide-back"):a.appendBack?e('<div class="slide-back"></div>').appendTo(n):e("<div></div>"),1==a.stack){var p,f;"vertical"===a.direction?(p="top",f="translate(0%, -100%) translateZ(0)"):(p="left",f="translate(-100%, 0%) translateZ(0)"),c={},a.useTranslate?s.appendStyleProperties(c,["transform"],[f]):c[p]="-100%",u.$back.css(c)}n.data("metrojs.tile",{animating:!1}),t.capabilities.canTransition&&a.useHardwareAccel&&(n.addClass("ha"),u.$front.addClass("ha"),u.$back.addClass("ha"));break;case"carousel":u.$listTiles=n.find(a.tileSelector).not(".tile-title");var m=u.$listTiles.length;n.data("metrojs.tile",{animating:!1}),a.currentIndex=Math.min(a.currentIndex,m-1),u.$listTiles.each(function(n,i){var o=e(i).addClass("slide"),l=a.listData[n],c="string"==typeof l.animationDirection&&l.animationDirection.length>0?l.animationDirection:a.animationDirection,u="string"==typeof l.direction&&l.direction.length>0?l.direction:a.direction;n==a.currentIndex?o.addClass("active"):"forward"===c?"vertical"===u?(d=a.useTranslate?s.appendStyleProperties({},["transform"],["translate(0%, 100%) translateZ(0)"]):{left:"0%",top:"100%"},o.css(d)):(d=a.useTranslate?s.appendStyleProperties({},["transform"],["translate(100%, 0%) translateZ(0)"]):{left:"100%",top:"0%"},o.css(d)):"backward"===c&&("vertical"===u?(d=a.useTranslate?s.appendStyleProperties({},["transform"],["translate(0%, -100%) translateZ(0)"]):{left:"0%",top:"-100%"},o.css(d)):(d=a.useTranslate?s.appendStyleProperties({},["transform"],["translate(-100%, 0%) translateZ(0)"]):{left:"-100%",top:"0%"},o.css(d))),r.bindLink(o,l),a.useHardwareAccel&&t.capabilities.canTransition&&r.bindBounce(o,l),o=null,l=null}),t.capabilities.canFlip3d&&a.useHardwareAccel&&(n.addClass("ha"),u.$listTiles.addClass("ha"));break;case"flip-list":u.$listTiles=n.find(a.tileSelector).not(".tile-title"),u.$listTiles.each(function(n,d){var u=e(d).addClass("tile-"+(n+1)),p=u.find(a.tileFaceSelector).filter(":first").addClass("flip-front").css({margin:"0px"});1===u.find(a.tileFaceSelector).length&&1==a.appendBack&&u.append("<div></div>");var f=u.find(a.tileFaceSelector).filter(":last").addClass("flip-back").css({margin:"0px"});a.listData[n].faces.$front=p,a.listData[n].faces.$back=f,u.data("metrojs.tile",{animating:!1,count:1,completeTimeout:null,flCompleteTimeout:null,index:n});var m=u.data("metrojs.tile");t.capabilities.canFlip3d&&a.useHardwareAccel?(u.addClass("ha"),p.addClass("ha"),f.addClass("ha"),o="vertical"===a.listData[n].direction?"rotateX(180deg)":"rotateY(180deg)",c=s.appendStyleProperties({},["transform"],[o]),f.css(c)):(l="vertical"===a.listData[n].direction?{height:"100%",width:"100%",marginTop:"0px",opacity:"1"}:{height:"100%",width:"100%",marginLeft:"0px",opacity:"1"},c="vertical"===a.listData[n].direction?{height:"0px",width:"100%",marginTop:a.listData[n].margin+"px",opacity:a.noHAflipOpacity}:{height:"100%",width:"0px",marginLeft:a.listData[n].margin+"px",opacity:a.noHAflipOpacity},p.css(l),f.css(c));var h=function(){m.count++,m.count>=i&&(m.count=1)};if(a.flipListOnHover){var w=a.flipListOnHoverEvent+".liveTile";p.bind(w,function(){r.flip(u,m.count,a,h)}),f.bind(w,function(){r.flip(u,m.count,a,h)})}a.listData[n].link.length>0&&u.css({cursor:"pointer"}).bind("click.liveTile",function(){a.listData[n].newWindow?window.open(a.listData[n].link):window.location=a.listData[n].link})});break;case"flip":u.$tileFaces=n.find(a.tileFaceSelector).not(".tile-title"),u.$front=null!=a.faces.$front&&a.faces.$front.length>0?a.faces.$front.addClass("flip-front"):u.$tileFaces.filter(":first").addClass("flip-front"),u.$back=null!=a.faces.$back&&a.faces.$back.length>0?a.faces.$back.addClass("flip-back"):u.$tileFaces.length>1?u.$tileFaces.filter(":last").addClass("flip-back"):a.appendBack?e('<div class="flip-back"></div>').appendTo(n):e("<div></div>"),n.data("metrojs.tile",{animating:!1}),t.capabilities.canFlip3d&&a.useHardwareAccel?(n.addClass("ha"),u.$front.addClass("ha"),u.$back.addClass("ha"),o="vertical"===a.direction?"rotateX(180deg)":"rotateY(180deg)",c=s.appendStyleProperties({},["transform"],[o]),u.$back.css(c)):(l="vertical"===a.direction?{height:"100%",width:"100%",marginTop:"0px",opacity:"1"}:{height:"100%",width:"100%",marginLeft:"0px",opacity:"1"},c="vertical"===a.direction?{height:"0%",width:"100%",marginTop:a.margin+"px",opacity:"0"}:{height:"100%",width:"0%",marginLeft:a.margin+"px",opacity:"0"},u.$front.css(l),u.$back.css(c))}return u},bindPauseOnHover:function(n){!function(){var a=n.data("LiveTile"),i=!1,o=!1,r=!1,s=!1,l="both"==a.pauseOnHoverEvent||"mouseover"==a.pauseOnHoverEvent||"mouseenter"==a.pauseOnHoverEvent,c="both"==a.pauseOnHoverEvent||"mouseout"==a.pauseOnHoverEvent||"mouseleave"==a.pauseOnHoverEvent;if(a.pOnHoverMethods={pause:function(){a.timer.pause(),"flip-list"===a.mode&&a.faces.$listTiles.each(function(t,n){window.clearTimeout(e(n).data("metrojs.tile").completeTimeout)})},over:function(e,t){t="undefined"==typeof t?!1:t,(t||!r)&&(i||o||a.runEvents&&(o=!0,a.eventTimeout=window.setTimeout(function(){o=!1,c&&(i=!0),r=!1,a.pOnHoverMethods.pause()},a.onHoverDelay)))},out:function(e,t){if(t="undefined"==typeof t?!1:t,t||1!=s){if(o)return window.clearTimeout(a.eventTimeout),o=!1,void 0;if(l){if(!i&&!o)return;a.runEvents&&a.timer.start(a.hasRun?a.delay:a.initDelay)}else a.pOnHoverMethods.pause();i=!1,s=!1}}},t.capabilities.canTouch)if(window.PointerEvent||window.MSPointerEvent){var d=window.MSPointerEvent?"MS":"";l&&n[0].addEventListener(d+"PointerOver",a.pOnHoverMethods.over,!1),c&&n[0].addEventListener(d+"PointerOut",a.pOnHoverMethods.out,!1)}else l&&(n.bind("mouseover.liveTile",a.pOnHoverMethods.over),n.bind("touchstart.liveTile",function(e){r=!1,a.pOnHoverMethods.over.apply(n[0],[e,!0])})),c&&(n.bind("mouseout.liveTile",a.pOnHoverMethods.out),n.bind("touchend.liveTile",function(e){s=!1,a.pOnHoverMethods.out.apply(n[0],[e,!0])}));else l&&n.bind("mouseover.liveTile",a.pOnHoverMethods.over),c&&n.bind("mouseout.liveTile",a.pOnHoverMethods.out)}()},unbindMsPauseOnHover:function(e,t){if("undefined"!=typeof t.pOnHoverMethods&&(window.PointerEvent||window.MSPointerEvent)){var n=window.MSPointerEvent?"MS":"";e[0].removeEventListener(n+"PointerOver",t.pOnHoverMethods.over,!1),e[0].removeEventListener(n+"PointerOut",t.pOnHoverMethods.out,!1)}},bindPlayOnHover:function(e,n){!function(){var a=!1,i=!1,r=!1,s=!1,l="both"==n.playOnHoverEvent||"mouseover"==n.playOnHoverEvent||"mouseenter"==n.playOnHoverEvent,c="both"==n.playOnHoverEvent||"mouseout"==n.playOnHoverEvent||"mouseleave"==n.playOnHoverEvent;if(n.onHoverMethods={over:function(t,s){if(s="undefined"==typeof s?!1:s,(s||!r)&&!(a||i||n.bounce&&"no"!=n.bounceMethods.down)){var l="flip"==n.mode||(n.startNow?!n.isReversed:n.isReversed);window.clearTimeout(n.eventTimeout),(n.runEvents&&l||!n.hasRun)&&(i=!0,n.eventTimeout=window.setTimeout(function(){i=!1,c&&(a=!0),o.play.apply(e[0],[0]),r=!1},n.onHoverDelay))}},out:function(t,r){return r="undefined"==typeof r?!1:r,r||1!=s?i?(window.clearTimeout(n.eventTimeout),i=!1,void 0):((!l||a||i)&&(window.clearTimeout(n.eventTimeout),n.eventTimeout=window.setTimeout(function(){var t="flip"==n.mode||(n.startNow?n.isReversed:!n.isReversed);n.runEvents&&t&&o.play.apply(e[0],[0]),s=!1,a=!1},n.speed+n.onHoverOutDelay)),void 0):void 0}},t.capabilities.canTouch)if(window.PointerEvent||window.MSPointerEvent){var d=window.MSPointerEvent?"MS":"";l&&e[0].addEventListener(d+"PointerEnter",n.onHoverMethods.over,!1),c&&e[0].addEventListener(d+"PointerLeave",n.onHoverMethods.out,!1)}else l&&(e.bind("touchstart.liveTile",function(t){r=!0,n.onHoverMethods.over.apply(e[0],[t,!0])}),e.bind("mouseenter.liveTile",n.onHoverMethods.over)),c&&(e.bind("touchend.liveTile,touchcancel.liveTile",function(t){s=!1,n.onHoverMethods.out.apply(e[0],[t,!0])}),e.bind("mouseleave.liveTile",n.onHoverMethods.out));else l&&e.bind("mouseenter.liveTile",n.onHoverMethods.over),c&&e.bind("mouseleave.liveTile",n.onHoverMethods.out)}()},unbindMsPlayOnHover:function(e,t){if("undefined"!=typeof t.onHoverMethods&&(window.PointerEvent||window.MSPointerEvent)){var n=window.MSPointerEvent?"MS":"";e[0].removeEventListener(n+"PointerOver",t.onHoverMethods.over,!1)}},bindBounce:function(n,a){a.bounce&&(n.addClass("bounce"),n.addClass("noselect"),function(){if(a.bounceMethods={down:"no",threshold:30,zeroPos:{x:0,y:0},eventPos:{x:0,y:0},inTilePos:{x:0,y:0},pointPos:{x:0,y:0},regions:{c:[0,0],tl:[-1,-1],tr:[1,-1],bl:[-1,1],br:[1,1],t:[null,-1],r:[1,null],b:[null,1],l:[-1,null]},targets:{all:["c","t","r","b","l","tl","tr","bl","br"],edges:["c","t","r","b","l"],corners:["c","tl","tr","bl","br"]},hitTest:function(n,i,o,r){var s=a.bounceMethods.regions,l=a.bounceMethods.targets[o],c=0,d=null,u=null,p={hit:[0,0],name:"c"};if(t.capabilities.isOldAndroid||!t.capabilities.canTransition)return p;"undefined"==typeof l&&("string"==typeof o&&(l=o.split(",")),e.isArray(l)&&-1==e.inArray("c")&&(r=0,p=null));for(var f=n.width(),m=n.height(),h=[f*r,m*r],w=i.x-.5*f,v=i.y-.5*m,g=[w>0?Math.abs(w)<=h[0]?0:1:Math.abs(w)<=h[0]?0:-1,v>0?Math.abs(v)<=h[1]?0:1:Math.abs(v)<=h[1]?0:-1];c<l.length;c++){if(null!=d)return d;var b=l[c],S=s[b];if("*"==b)return b=l[c+1],{region:s[b],name:b};g[0]==S[0]&&g[1]==S[1]?d={hit:S,name:b}:g[0]!=S[0]&&null!=S[0]||g[1]!=S[1]&&null!=S[1]||(u={hit:S,name:b})}return null!=d?d:null!=u?u:p},bounceDown:function(t){if("A"!=t.target.tagName||e(t).is(".bounce")){{var i=t.originalEvent&&t.originalEvent.touches?t.originalEvent.touches[0]:t,o=n.offset();window.pageXOffset,window.pageYOffset}a.bounceMethods.pointPos={x:i.pageX,y:i.pageY},a.bounceMethods.inTilePos={x:i.pageX-o.left,y:i.pageY-o.top},a.$tileParent||(a.$tileParent=n.parent());var r=a.$tileParent.offset();a.bounceMethods.eventPos={x:o.left-r.left+n.width()/2,y:o.top-r.top+n.height()/2};var l=a.bounceMethods.hitTest(n,a.bounceMethods.inTilePos,a.bounceDirections,.25);if(null==l)a.bounceMethods.down="no";else{if(window.PointerEvent||window.MSPointerEvent){var c=window.MSPointerEvent?"MS":"";document.addEventListener(c+"PointerUp",a.bounceMethods.bounceUp,!1),n[0].addEventListener(c+"PointerUp",a.bounceMethods.bounceUp,!1),document.addEventListener(c+"PointerCancel",a.bounceMethods.bounceUp,!1),a.bounceFollowsMove&&n[0].addEventListener(c+"PointerMove",a.bounceMethods.bounceMove,!1)}else e(document).bind("mouseup.liveTile, touchend.liveTile, touchcancel.liveTile, dragstart.liveTile",a.bounceMethods.bounceUp),a.bounceFollowsMove&&(n.bind("touchmove.liveTile",a.bounceMethods.bounceMove),n.bind("mousemove.liveTile",a.bounceMethods.bounceMove));var d="bounce-"+l.name;n.addClass(d),a.bounceMethods.down=d,a.bounceMethods.downPcss=s.appendStyleProperties({},["perspective-origin"],[a.bounceMethods.eventPos.x+"px "+a.bounceMethods.eventPos.y+"px"]),a.$tileParent.css(a.bounceMethods.downPcss)}}},bounceUp:function(){if("no"!=a.bounceMethods.down){if(a.bounceMethods.unBounce(),window.PointerEvent||window.MSPointerEvent){var t=window.MSPointerEvent?"MS":"";document.removeEventListener(t+"PointerUp",a.bounceMethods.bounceUp,!1),n[0].removeEventListener(t+"PointerUp",a.bounceMethods.bounceUp,!1),document.removeEventListener(t+"PointerCancel",a.bounceMethods.bounceUp,!1),a.bounceFollowsMove&&n[0].removeEventListener(t+"PointerMove",a.bounceMethods.bounceMove,!1)}else e(document).unbind("mouseup.liveTile, touchend.liveTile, touchcancel.liveTile, dragstart.liveTile",a.bounceMethods.bounceUp);a.bounceFollowsMove&&(n.unbind("touchmove.liveTile",a.bounceMethods.bounceMove),n.unbind("mousemove.liveTile",a.bounceMethods.bounceMove))}},bounceMove:function(e){if("no"!=a.bounceMethods.down){var t=e.originalEvent&&e.originalEvent.touches?e.originalEvent.touches[0]:e,i=Math.abs(t.pageX-a.bounceMethods.pointPos.x),o=Math.abs(t.pageY-a.bounceMethods.pointPos.y);if(i>a.bounceMethods.threshold||o>a.bounceMethods.threshold){var r=a.bounceMethods.down;a.bounceMethods.bounceDown(e),r!=a.bounceMethods.down&&n.removeClass(r)}}},unBounce:function(){if(n.removeClass(a.bounceMethods.down),"object"==typeof a.bounceMethods.downPcss){var e=["perspective-origin","perspective-origin-x","perspective-origin-y"],t=["","",""];a.bounceMethods.downPcss=s.appendStyleProperties({},e,t),window.setTimeout(function(){a.$tileParent.css(a.bounceMethods.downPcss)},200)}a.bounceMethods.down="no",a.bounceMethods.inTilePos=a.bounceMethods.zeroPos,a.bounceMethods.eventPos=a.bounceMethods.zeroPos}},window.PointerEvent||window.MSPointerEvent){var i=window.MSPointerEvent?"MS":"";n[0].addEventListener(i+"PointerDown",a.bounceMethods.bounceDown,!1)}else t.capabilities.canTouch?(n.bind("touchstart.liveTile",a.bounceMethods.bounceDown),n.bind("mousedown.liveTile",a.bounceMethods.bounceDown)):n.bind("mousedown.liveTile",a.bounceMethods.bounceDown)}())},unbindMsBounce:function(e,t){if(t.bounce&&(window.PointerEvent||window.MSPointerEvent)){var n=window.MSPointerEvent?"MS":"";e[0].removeEventListener(n+"PointerDown",t.bounceMethods.bounceDown,!1),e[0].removeEventListener(n+"PointerCancel",t.bounceMethods.bounceUp,!1),e[0].removeEventListener(n+"PointerOut",t.bounceMethods.bounceUp,!1)}},bindLink:function(t,n){n.link.length>0&&t.css({cursor:"pointer"}).bind("click.liveTile",function(t){("A"!=t.target.tagName||e(t).is(".live-tile,.slide,.flip"))&&(n.newWindow?window.open(n.link):window.location=n.link)})},runContenModules:function(e,t,n,a){for(var i=0;i<e.contentModules.length;i++){var o=e.contentModules[i];"function"==typeof o.action&&o.action(e,t,n,a)}},fade:function(t,n,i){var o="object"==typeof i?i:t.data("LiveTile"),s=function(){(o.timer.repeatCount>0||-1==o.timer.repeatCount)&&o.timer.count!=o.timer.repeatCount&&o.timer.start(o.delay)};if("undefined"==typeof o)return a(e.fn.liveTile.defaults.rebindMessage),void 0;if(!o.faces.$front.is(":animated")){o.timer.pause();var l=o.loopCount+1;o.isReversed=l%2===0;var c=o.animationStarting.call(t[0],o,o.faces.$front,o.faces.$back);if("undefined"!=typeof c&&0==c)return s(),void 0;o.loopCount=l;var d=function(){s(),r.runContenModules(o,o.faces.$front,o.faces.$back),o.animationComplete.call(t[0],o,o.faces.$front,o.faces.$back)};o.isReversed?o.faces.$front.fadeIn(o.speed,o.noHaTransFunc,d):o.faces.$front.fadeOut(o.speed,o.noHaTransFunc,d)}},slide:function(n,i,o,l,c){var d="object"==typeof o?o:n.data("LiveTile"),u=n.data("metrojs.tile");if("undefined"==typeof d)return a(e.fn.liveTile.defaults.rebindMessage),void 0;if(1==u.animating||n.is(":animated"))return d=null,u=null,void 0;var p=function(){(d.timer.repeatCount>0||-1==d.timer.repeatCount)&&d.timer.count!=d.timer.repeatCount&&d.timer.start(d.delay)};if("carousel"!==d.mode){d.isReversed=d.currentIndex%2!==0,d.timer.pause();var f=d.animationStarting.call(n[0],d,d.faces.$front,d.faces.$back);if("undefined"!=typeof f&&0==f)return p(),void 0;d.loopCount=d.loopCount+1}else d.isReversed=!0;var m;m="string"==typeof d.tempValues.direction&&d.tempValues.direction.length>0?d.tempValues.direction:d.direction,d.tempValues.direction=null;var h={},w={},v="undefined"==typeof l?d.currentIndex:l,g=e.trim(d.stops[Math.min(v,d.stops.length-1)]),b=g.indexOf("px"),S=0,y=0,k="vertical"===m?d.height:d.width,T="vertical"===m?"top":"left",I=1==d.stack,D=function(){"undefined"==typeof c?(d.currentIndex=d.currentIndex+1,d.currentIndex>d.stops.length-1&&(d.currentIndex=0)):c(),"carousel"!=d.mode&&p(),r.runContenModules(d,d.faces.$front,d.faces.$back,d.currentIndex),d.animationComplete.call(n[0],d,d.faces.$front,d.faces.$back),d=null,u=null};if(b>0?(y=parseInt(g.substring(0,b),10),S=y-k+"px"):(y=parseInt(g.replace("%",""),10),S=y-100+"%"),t.capabilities.canTransition&&d.useHardwareAccel){if("undefined"!=typeof u.animating&&1==u.animating)return;u.animating=!0;var M=["transition-property","transition-duration","transition-timing-function"],x=[d.useTranslate?"transform":T,d.speed+"ms",d.haTransFunc];x[s.browserPrefix+"transition-property"]=s.browserPrefix+"transform",h=s.appendStyleProperties(h,M,x),w=s.appendStyleProperties(w,M,x);var C,O="vertical"===m,B=O?"top":"left";d.useTranslate?(C=O?"translate(0%, "+g+")":"translate("+g+", 0%)",h=s.appendStyleProperties(h,["transform"],[C+"translateZ(0)"]),I&&(C=O?"translate(0%, "+S+")":"translate("+S+", 0%)",w=s.appendStyleProperties(w,["transform"],[C+"translateZ(0)"]))):(h[B]=g,I&&(w[B]=S)),d.faces.$front.css(h),I&&d.faces.$back.css(w),window.clearTimeout(d.completeTimeout),d.completeTimeout=window.setTimeout(function(){u.animating=!1,D()},d.speed)}else{h[T]=g,w[T]=S,u.animating=!0;var P=d.faces.$front.stop(),$=d.faces.$back.stop();P.animate(h,d.speed,d.noHaTransFunc,function(){u.animating=!1,D()}),I&&$.animate(w,d.speed,d.noHaTransFunc,function(){})}},carousel:function(n,i){var o=n.data("LiveTile");if("undefined"==typeof o)return a(e.fn.liveTile.defaults.rebindMessage),void 0;var l=n.data("metrojs.tile");if(1==l.animating||o.faces.$listTiles.length<=1)return l=null,void 0;var c=function(){(o.timer.repeatCount>0||-1==o.timer.repeatCount)&&o.timer.count!=o.timer.repeatCount&&o.timer.start(o.delay)};o.timer.pause();var d=o.faces.$listTiles.filter(".active"),u=o.faces.$listTiles.index(d),p=o.currentIndex,f=p!=u?p:u,m=f+1>=o.faces.$listTiles.length?0:f+1,h=o.listData[m];if(u==m)return l=null,d=null,void 0;var w;w="string"==typeof o.tempValues.animationDirection&&o.tempValues.animationDirection.length>0?o.tempValues.animationDirection:"string"==typeof h.animationDirection&&h.animationDirection.length>0?h.animationDirection:o.animationDirection,o.tempValues.animationDirection=null;var v;"string"==typeof o.tempValues.direction&&o.tempValues.direction.length>0?v=o.tempValues.direction:"string"==typeof h.direction&&h.direction.length>0?(v=h.direction,o.tempValues.direction=v):v=o.direction;var g=o.faces.$listTiles.eq(m),b=o.animationStarting.call(n[0],o,d,g);if("undefined"!=typeof b&&0==b)return c(),void 0;o.loopCount=o.loopCount+1;var S,y=s.appendStyleProperties({},["transition-duration"],["0s"]),k="vertical"===v;
"backward"===w?(o.useTranslate&&t.capabilities.canTransition?(S=k?"translate(0%, -100%)":"translate(-100%, 0%)",y=s.appendStyleProperties(y,["transform"],[S+" translateZ(0)"]),o.stops=["100%"]):(k?(y.top="-100%",y.left="0%"):(y.top="0%",y.left="-100%"),o.stops=["100%"]),o.faces.$front=d,o.faces.$back=g):(o.useTranslate&&t.capabilities.canTransition?(S=k?"translate(0%, 100%)":"translate(100%, 0%)",y=s.appendStyleProperties(y,["transform"],[S+" translateZ(0)"])):k?(y.top="100%",y.left="0%"):(y.top="0%",y.left="100%"),o.faces.$front=g,o.faces.$back=d,o.stops=["0%"]),g.css(y),window.setTimeout(function(){d.removeClass("active"),g.addClass("active"),r.slide(n,i,o,0,function(){o.currentIndex=m,l=null,d=null,g=null,c()})},150)},flip:function(n,i,o,l){var c=n.data("metrojs.tile");if("undefined"!=typeof c&&1==c.animating)return c=null,void 0;var d="object"==typeof o?o:n.data("LiveTile");if("undefined"==typeof d)return a(e.fn.liveTile.defaults.rebindMessage),void 0;var u,p,f,m,h,w,v,g="undefined"==typeof l,b=0,S=function(){(d.timer.repeatCount>0||-1==d.timer.repeatCount)&&d.timer.count!=d.timer.repeatCount&&d.timer.start(d.delay)};if(g){d.timer.pause();var y=d.loopCount+1;v=y%2===0,d.isReversed=v,u=d.faces.$front,p=d.faces.$back;var k=v?[d,p,u]:[d,u,p],T=d.animationStarting.apply(n[0],k);if("undefined"!=typeof T&&0==T)return S(),void 0;f=d.direction,height=d.height,width=d.width,margin=d.margin,d.loopCount=y}else v=i%2===0,b=c.index,u=d.listData[b].faces.$front,p=d.listData[b].faces.$back,d.listData[b].isReversed=v,f=d.listData[b].direction,height=d.listData[b].height,width=d.listData[b].width,margin=d.listData[b].margin;if(t.capabilities.canFlip3d&&d.useHardwareAccel){m=v?"360deg":"180deg",h="vertical"===f?"rotateX("+m+")":"rotateY("+m+")",w=s.appendStyleProperties({},["transform","transition"],[h,"all "+d.speed+"ms "+d.haTransFunc+" 0s"]);var I=v?"540deg":"360deg",D="vertical"===f?"rotateX("+I+")":"rotateY("+I+")",M=s.appendStyleProperties({},["transform","transition"],[D,"all "+d.speed+"ms "+d.haTransFunc+" 0s"]);u.css(w),p.css(M);var x=function(){c.animating=!1;var e,t;v?(e="vertical"===f?"rotateX(0deg)":"rotateY(0deg)",t=s.appendStyleProperties({},["transform","transition"],[e,"all 0s "+d.haTransFunc+" 0s"]),u.css(t),r.runContenModules(d,u,p,b),g?(S(),d.animationComplete.call(n[0],d,u,p)):l(d,u,p),u=null,p=null,d=null,c=null):(r.runContenModules(d,p,u,b),g?(S(),d.animationComplete.call(n[0],d,p,u)):l(d,p,u))};"flip-list"===d.mode?(window.clearTimeout(d.listData[b].completeTimeout),d.listData[b].completeTimeout=window.setTimeout(x,d.speed)):(window.clearTimeout(d.completeTimeout),d.completeTimeout=window.setTimeout(x,d.speed))}else{var C,O=d.speed/2,B="vertical"===f?{height:"0px",width:"100%",marginTop:margin+"px",opacity:d.noHAflipOpacity}:{height:"100%",width:"0px",marginLeft:margin+"px",opacity:d.noHAflipOpacity},P="vertical"===f?{height:"100%",width:"100%",marginTop:"0px",opacity:"1"}:{height:"100%",width:"100%",marginLeft:"0px",opacity:"1"};v?(c.animating=!0,p.stop().animate(B,{duration:O}),C=function(){c.animating=!1,u.stop().animate(P,{duration:O,complete:function(){r.runContenModules(d,u,p,b),g?(S(),d.animationComplete.call(n[0],d,u,p)):l(d,u,p),c=null,u=null,p=null}})},"flip-list"===d.mode?(window.clearTimeout(d.listData[c.index].completeTimeout),d.listData[c.index].completeTimeout=window.setTimeout(C,O)):(window.clearTimeout(d.completeTimeout),d.completeTimeout=window.setTimeout(C,O))):(c.animating=!0,u.stop().animate(B,{duration:O}),C=function(){c.animating=!1,p.stop().animate(P,{duration:O,complete:function(){r.runContenModules(d,p,u,b),g?(S(),d.animationComplete.call(n[0],d,p,u)):l(d,p,u),u=null,p=null,d=null,c=null}})},"flip-list"===d.mode?(window.clearTimeout(d.listData[c.index].completeTimeout),d.listData[c.index].completeTimeout=window.setTimeout(C,O)):(window.clearTimeout(d.completeTimeout),d.completeTimeout=window.setTimeout(C,O)))}},flipList:function(t){var n=t.data("LiveTile"),o=n.speed,s=!1,l=function(){(n.timer.repeatCount>0||-1==n.timer.repeatCount)&&n.timer.count!=n.timer.repeatCount&&n.timer.start(n.delay)};if("undefined"==typeof n)return a(e.fn.liveTile.defaults.rebindMessage),void 0;n.timer.pause();var c=n.animationStarting.call(t[0],n,null,null);return"undefined"!=typeof c&&0==c?(l(),void 0):(n.loopCount=n.loopCount+1,n.faces.$listTiles.each(function(t,a){var l=e(a),c=l.data("metrojs.tile"),d=n.triggerDelay(t),u=n.speed+Math.max(d,0),p=n.alwaysTrigger;p||(p=351*Math.random()>150?!0:!1),p&&(s=!0,o=Math.max(u+n.speed,o),window.clearTimeout(c.flCompleteTimeout),c.flCompleteTimeout=window.setTimeout(function(){r.flip(l,c.count,n,function(){c.count++,c.count>=i&&(c.count=1),l=null,c=null})},u))}),s&&(window.clearTimeout(n.flCompleteTimeout),n.flCompleteTimeout=window.setTimeout(function(){r.runContenModules(n,null,null,-1),n.animationComplete.call(t[0],n,null,null),l()},o+n.speed)),void 0)}},s={stylePrefixes:"Webkit Moz O ms Khtml ".split(" "),domPrefixes:"-webkit- -moz- -o- -ms- -khtml- ".split(" "),browserPrefix:null,appendStyleProperties:function(t,n,a){for(var i=0;i<=n.length-1;i++)t[e.trim(this.browserPrefix+n[i])]=a[i],t[e.trim(n[i])]=a[i];return t},applyStyleValue:function(t,n,a){return t[e.trim(this.browserPrefix+n)]=a,t[n]=a,t},getBrowserPrefix:function(){if(null==this.browserPrefix){for(var e="",t=0;t<=this.domPrefixes.length-1;t++)"undefined"!=typeof document.body.style[this.domPrefixes[t]+"transform"]&&(e=this.domPrefixes[t]);return this.browserPrefix=e}return this.browserPrefix},shuffleArray:function(e){for(var t=[];e.length;)t.push(e.splice(Math.random()*e.length,1));for(;t.length;)e.push(t.pop());return e}},l={moduleName:"custom",customSwap:{data:{customDoSwapFront:function(){return!1},customDoSwapBack:function(){return!1},customGetContent:function(){return null}},initData:function(t){var n={};n.doSwapFront=e.inArray("custom",t.swapFront)>-1&&t.customDoSwapFront(),n.doSwapBack=e.inArray("custom",t.swapBack)>-1&&t.customDoSwapBack(),t.customSwap="undefined"!=typeof t.customSwap?e.extend(n,t.customSwap):n},action:function(){}},htmlSwap:{moduleName:"html",data:{frontContent:[],frontIsRandom:!0,frontIsInGrid:!1,backContent:[],backIsRandom:!0,backIsInGrid:!1},initData:function(t,n){var a={backBag:[],backIndex:0,backStaticIndex:0,backStaticRndm:-1,prevBackIndex:-1,frontBag:[],frontIndex:0,frontStaticIndex:0,frontStaticRndm:-1,prevFrontIndex:-1};t.ignoreDataAttributes?(a.frontIsRandom=t.frontIsRandom,a.frontIsInGrid=t.frontIsInGrid,a.backIsRandom=t.backIsRandom,a.backIsInGrid=t.backIsInGrid):(a.frontIsRandom=r.getDataOrDefault(n,"front-israndom",t.frontIsRandom),a.frontIsInGrid=r.getDataOrDefault(n,"front-isingrid",t.frontIsInGrid),a.backIsRandom=r.getDataOrDefault(n,"back-israndom",t.backIsRandom),a.backIsInGrid=r.getDataOrDefault(n,"back-isingrid",t.backIsInGrid)),a.doSwapFront=e.inArray("html",t.swapFront)>-1&&t.frontContent instanceof Array&&t.frontContent.length>0,a.doSwapBack=e.inArray("html",t.swapBack)>-1&&t.backContent instanceof Array&&t.backContent.length>0,t.htmlSwap="undefined"!=typeof t.htmlSwap?e.extend(a,t.htmlSwap):a,t.htmlSwap.doSwapFront&&(t.htmlSwap.frontBag=this.prepBag(t.htmlSwap.frontBag,t.frontContent,t.htmlSwap.prevFrontIndex),t.htmlSwap.frontStaticRndm=t.htmlSwap.frontBag.pop()),t.htmlSwap.doSwapBack&&(t.htmlSwap.backBag=this.prepBag(t.htmlSwap.backBag,t.backContent,t.htmlSwap.prevBackIndex),t.htmlSwap.backStaticRndm=t.htmlSwap.backBag.pop())},prepBag:function(e,t,n){e=e||[];for(var a=0,i=0;i<t.length;i++)(i!=n||1===e.length)&&(e[a]=i,a++);return s.shuffleArray(e)},getFrontSwapIndex:function(e){var t=0;return e.htmlSwap.frontIsRandom?(0===e.htmlSwap.frontBag.length&&(e.htmlSwap.frontBag=this.prepBag(e.htmlSwap.frontBag,e.frontContent,e.htmlSwap.prevFrontIndex)),t=e.htmlSwap.frontIsInGrid?e.htmlSwap.frontStaticRndm:e.htmlSwap.frontBag.pop()):t=e.htmlSwap.frontIsInGrid?e.htmlSwap.frontStaticIndex:e.htmlSwap.frontIndex,t},getBackSwapIndex:function(e){var t=0;return e.htmlSwap.backIsRandom?(0===e.htmlSwap.backBag.length&&(e.htmlSwap.backBag=this.prepBag(e.htmlSwap.backBag,e.backContent,e.htmlSwap.prevBackIndex)),t=e.htmlSwap.backIsInGrid?e.htmlSwap.backStaticRndm:e.htmlSwap.backBag.pop()):t=e.htmlSwap.backIsInGrid?e.htmlSwap.backStaticIndex:e.htmlSwap.backIndex,t},action:function(e,t,n,a){if(e.htmlSwap.doSwapFront||e.htmlSwap.doSwapBack){var i="flip-list"===e.mode,o=0,r=i?e.listData[Math.max(a,0)].isReversed:e.isReversed;if(i&&-1==a)return r?e.htmlSwap.doSwapBack&&(0===e.htmlSwap.backBag.length&&(e.htmlSwap.backBag=this.prepBag(e.htmlSwap.backBag,e.backContent,e.htmlSwap.backStaticRndm)),e.htmlSwap.backStaticRndm=e.htmlSwap.backBag.pop(),e.htmlSwap.backStaticIndex++,e.htmlSwap.backStaticIndex>=e.backContent.length&&(e.htmlSwap.backStaticIndex=0)):e.htmlSwap.doSwapFront&&(0===e.htmlSwap.frontBag.length&&(e.htmlSwap.frontBag=this.prepBag(e.htmlSwap.frontBag,e.frontContent,e.htmlSwap.frontStaticRndm)),e.htmlSwap.frontStaticRndm=e.htmlSwap.frontBag.pop(),e.htmlSwap.frontStaticIndex++,e.htmlSwap.frontStaticIndex>=e.frontContent.length&&(e.htmlSwap.frontStaticIndex=0)),void 0;if(r){if(!e.htmlSwap.doSwapBack)return;o=this.getBackSwapIndex(e),e.htmlSwap.prevBackIndex=o,n.html(e.backContent[e.htmlSwap.backIndex]),e.htmlSwap.backIndex++,e.htmlSwap.backIndex>=e.backContent.length&&(e.htmlSwap.backIndex=0),i||(e.htmlSwap.backStaticIndex++,e.htmlSwap.backStaticIndex>=e.backContent.length&&(e.htmlSwap.backStaticIndex=0))}else{if(!e.htmlSwap.doSwapFront)return;o=this.getFrontSwapIndex(e),e.htmlSwap.prevFrontIndex=o,"slide"===e.mode?e.startNow?n.html(e.frontContent[o]):t.html(e.frontContent[o]):n.html(e.frontContent[o]),e.htmlSwap.frontIndex++,e.htmlSwap.frontIndex>=e.frontContent.length&&(e.htmlSwap.frontIndex=0),i||(e.htmlSwap.frontStaticIndex++,e.htmlSwap.frontStaticIndex>=e.frontContent.length&&(e.htmlSwap.frontStaticIndex=0))}}}},imageSwap:{moduleName:"image",data:{preloadImages:!1,imageCssSelector:">img,>a>img",fadeSwap:!1,frontImages:[],frontIsRandom:!0,frontIsBackgroundImage:!1,frontIsInGrid:!1,backImages:null,backIsRandom:!0,backIsBackgroundImage:!1,backIsInGrid:!1},initData:function(t,n){var a={backBag:[],backIndex:0,backStaticIndex:0,backStaticRndm:-1,frontBag:[],frontIndex:0,frontStaticIndex:0,frontStaticRndm:-1,prevBackIndex:-1,prevFrontIndex:-1},i=t.ignoreDataAttributes;i?(a.imageCssSelector=r.getDataOrDefault(n,"image-css",t.imageCssSelector),a.fadeSwap=r.getDataOrDefault(n,"fadeswap",t.fadeSwap),a.frontIsRandom=r.getDataOrDefault(n,"front-israndom",t.frontIsRandom),a.frontIsInGrid=r.getDataOrDefault(n,"front-isingrid",t.frontIsInGrid),a.frontIsBackgroundImage=r.getDataOrDefault(n,"front-isbg",t.frontIsBackgroundImage),a.backIsRandom=r.getDataOrDefault(n,"back-israndom",t.backIsRandom),a.backIsInGrid=r.getDataOrDefault(n,"back-isingrid",t.backIsInGrid),a.backIsBackgroundImage=r.getDataOrDefault(n,"back-isbg",t.backIsBackgroundImage),a.doSwapFront=e.inArray("image",t.swapFront)>-1&&t.frontImages instanceof Array&&t.frontImages.length>0,a.doSwapBack=e.inArray("image",t.swapBack)>-1&&t.backImages instanceof Array&&t.backImages.length>0,a.alwaysSwapFront=r.getDataOrDefault(n,"front-alwaysswap",t.alwaysSwapFront),a.alwaysSwapBack=r.getDataOrDefault(n,"back-alwaysswap",t.alwaysSwapBack)):(a.imageCssSelector=t.imageCssSelector,a.fadeSwap=t.fadeSwap,a.frontIsRandom=t.frontIsRandom,a.frontIsInGrid=t.frontIsInGrid,a.frontIsBackgroundImage=t.frontIsBackgroundImage,a.backIsRandom=t.backIsRandom,a.backIsInGrid=t.backIsInGrid,a.backIsBackgroundImage=t.backIsBackgroundImage,a.doSwapFront=e.inArray("image",t.swapFront)>-1&&t.frontImages instanceof Array&&t.frontImages.length>0,a.doSwapBack=e.inArray("image",t.swapBack)>-1&&t.backImages instanceof Array&&t.backImages.length>0,a.alwaysSwapFront=t.alwaysSwapFront,a.alwaysSwapBack=t.alwaysSwapBack),t.imgSwap="undefined"!=typeof t.imgSwap?e.extend(a,t.imgSwap):a,t.imgSwap.doSwapFront&&(t.imgSwap.frontBag=this.prepBag(t.imgSwap.frontBag,t.frontImages,t.imgSwap.prevFrontIndex),t.imgSwap.frontStaticRndm=t.imgSwap.frontBag.pop(),t.preloadImages&&e(t.frontImages).metrojs.preloadImages(function(){})),t.imgSwap.doSwapBack&&(t.imgSwap.backBag=this.prepBag(t.imgSwap.backBag,t.backImages,t.imgSwap.prevBackIndex),t.imgSwap.backStaticRndm=t.imgSwap.backBag.pop(),t.preloadImages&&e(t.backImages).metrojs.preloadImages(function(){}))},prepBag:function(e,t,n){e=e||[];for(var a=0,i=0;i<t.length;i++)(i!=n||1===t.length)&&(e[a]=i,a++);return s.shuffleArray(e)},getFrontSwapIndex:function(e){var t=0;return e.imgSwap.frontIsRandom?(0===e.imgSwap.frontBag.length&&(e.imgSwap.frontBag=this.prepBag(e.imgSwap.frontBag,e.frontImages,e.imgSwap.prevFrontIndex)),t=e.imgSwap.frontIsInGrid?e.imgSwap.frontStaticRndm:e.imgSwap.frontBag.pop()):t=e.imgSwap.frontIsInGrid?e.imgSwap.frontStaticIndex:e.imgSwap.frontIndex,t},getBackSwapIndex:function(e){var t=0;return e.imgSwap.backIsRandom?(0===e.imgSwap.backBag.length&&(e.imgSwap.backBag=this.prepBag(e.imgSwap.backBag,e.backImages,e.imgSwap.prevBackIndex)),t=e.imgSwap.backIsInGrid?e.imgSwap.backStaticRndm:e.imgSwap.backBag.pop()):t=e.imgSwap.backIsInGrid?e.imgSwap.backStaticIndex:e.imgSwap.backIndex,t},setImageProperties:function(t,n,a){var i={},o={};"undefined"!=typeof n.src&&(a?i.backgroundImage="url('"+n.src+"')":o.src=n.src),"undefined"!=typeof n.alt&&(o.alt=n.alt),"object"==typeof n.css?t.css(e.extend(i,n.css)):t.css(i),"object"==typeof n.attr?t.attr(e.extend(o,n.attr)):t.attr(o)},action:function(e,t,n,a){if(e.imgSwap.doSwapFront||e.imgSwap.doSwapBack){var i="flip-list"===e.mode,o=("slide"==e.mode,0),r=i?e.listData[Math.max(a,0)].isReversed:e.isReversed;if(i&&-1==a)return(e.alwaysSwapFront||!r)&&e.imgSwap.doSwapFront&&(0===e.imgSwap.frontBag.length&&(e.imgSwap.frontBag=this.prepBag(e.imgSwap.frontBag,e.frontImages,e.imgSwap.frontStaticRndm)),e.imgSwap.frontStaticRndm=e.imgSwap.frontBag.pop(),e.imgSwap.frontStaticIndex++,e.imgSwap.frontStaticIndex>=e.frontImages.length&&(e.imgSwap.frontStaticIndex=0)),(e.alwaysSwapBack||r)&&e.imgSwap.doSwapBack&&(0===e.imgSwap.backBag.length&&(e.imgSwap.backBag=this.prepBag(e.imgSwap.backBag,e.backImages,e.imgSwap.backStaticRndm)),e.imgSwap.backStaticRndm=e.imgSwap.backBag.pop(),e.imgSwap.backStaticIndex++,e.imgSwap.backStaticIndex>=e.backImages.length&&(e.imgSwap.backStaticIndex=0)),void 0;var s,c,d,u;if(e.alwaysSwapFront||!r){if(!e.imgSwap.doSwapFront)return;o=this.getFrontSwapIndex(e),e.imgSwap.prevFrontIndex=o,s="slide"===e.mode?t:n,c=s.find(e.imgSwap.imageCssSelector),d="object"==typeof e.frontImages[o]?e.frontImages[o]:{src:e.frontImages[o]},u=function(t){var n=e.imgSwap.frontIsBackgroundImage;"function"==typeof t&&(n?window.setTimeout(t,100):c[0].onload=t),l.imageSwap.setImageProperties(c,d,n)},e.fadeSwap?c.fadeOut(function(){u(function(){c.fadeIn()})}):u(),e.imgSwap.frontIndex++,e.imgSwap.frontIndex>=e.frontImages.length&&(e.imgSwap.frontIndex=0),i||(e.imgSwap.frontStaticIndex++,e.imgSwap.frontStaticIndex>=e.frontImages.length&&(e.imgSwap.frontStaticIndex=0))}if(e.alwaysSwapBack||r){if(!e.imgSwap.doSwapBack)return;o=this.getBackSwapIndex(e),e.imgSwap.prevBackIndex=o,s=n,c=s.find(e.imgSwap.imageCssSelector),d="object"==typeof e.backImages[o]?e.backImages[o]:{src:e.backImages[o]},u=function(){l.imageSwap.setImageProperties(c,d,e.imgSwap.backIsBackgroundImage)},e.fadeSwap?c.fadeOut(function(){u(function(){c.fadeIn()})}):u(),e.imgSwap.backIndex++,e.imgSwap.backIndex>=e.backImages.length&&(e.imgSwap.backIndex=0),i||(e.imgSwap.backStaticIndex++,e.imgSwap.backStaticIndex>=e.backImages.length&&(e.imgSwap.backStaticIndex=0))}}}}};e.fn.metrojs.TileTimer=function(e,t,n){this.timerId=null,this.interval=e,this.action=t,this.count=0,this.repeatCount="undefined"==typeof n?0:n,this.start=function(t){window.clearTimeout(this.timerId);var n=this;this.timerId=window.setTimeout(function(){n.tick.call(n,e)},t)},this.tick=function(e){this.action(this.count+1),this.count++,this.count>=i&&(this.count=0),(this.repeatCount>0||-1==this.repeatCount)&&(this.count!=this.repeatCount?this.start(e):this.stop())},this.stop=function(){this.timerId=window.clearTimeout(this.timerId),this.reset()},this.resume=function(){(this.repeatCount>0||-1==this.repeatCount)&&this.count!=this.repeatCount&&this.start(e)},this.pause=function(){this.timerId=window.clearTimeout(this.timerId)},this.reset=function(){this.count=0},this.restart=function(e){this.stop(),this.start(e)}},e.fn.metrojs.preloadImages=function(t){var n=e(this).toArray(),a=e("<img style='display:none;' />").appendTo("body");e(this).each(function(){var e=this;"object"==typeof this&&(e=this.src),a.attr({src:e}).load(function(){for(var e=0;e<n.length;e++)n[e]==element&&n.splice(e,1);0==n.length&&t()})}),a.remove()},e.fn.metrojs.MetroModernizr=function(t){if("undefined"==typeof t&&(t={useHardwareAccel:!0,useModernizr:"undefined"!=typeof window.Modernizr}),this.isOldJQuery=/^1\.[0123]/.test(e.fn.jquery),this.isOldAndroid=function(){try{var t=navigator.userAgent;if(t.indexOf("Android")>=0){var n=parseFloat(t.slice(t.indexOf("Android")+8));if(2.3>n)return!0}}catch(a){e.error(a)}return!1}(),this.canTransform=!1,this.canTransition=!1,this.canTransform3d=!1,this.canAnimate=!1,this.canTouch=!1,this.canFlip3d=t.useHardwareAccel,1==t.useHardwareAccel)if(0==t.useModernizr)if("undefined"!=typeof window.MetroModernizr)this.canTransform=window.MetroModernizr.canTransform,this.canTransition=window.MetroModernizr.canTransition,this.canTransform3d=window.MetroModernizr.canTransform3d,this.canAnimate=window.MetroModernizr.canAnimate,this.canTouch=window.MetroModernizr.canTouch;else{window.MetroModernizr={};var n="metromodernizr",a=document.documentElement,i=document.head||document.getElementsByTagName("head")[0],o=document.createElement(n),r=o.style,s=" -webkit- -moz- -o- -ms- ".split(" "),l="Webkit Moz O ms Khtml".split(" "),c=function(e,t){for(var n in e)if(void 0!==r[e[n]]&&(!t||t(e[n],o)))return!0},d=function(e,t){var n=e.charAt(0).toUpperCase()+e.substr(1),a=(e+" "+l.join(n+" ")+n).split(" ");return!!c(a,t)},u=function(){var e=!!c(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);return e&&"webkitPerspective"in a.style&&(e=p(["@media (",s.join("transform-3d),("),n,")","{#metromodernizr{left:9px;position:absolute;height:3px;}}"].join(""),function(e){return 3===e.offsetHeight&&9===e.offsetLeft})),e},p=function(e,t){var o,r=document.createElement("style"),s=document.createElement("div");return r.textContent=e,i.appendChild(r),s.id=n,a.appendChild(s),o=t(s),r.parentNode.removeChild(r),s.parentNode.removeChild(s),!!o},f=function(){return canTouch="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||window.PointerEvent&&window.navigator.maxTouchPoints>0||window.MSPointerEvent&&window.navigator.msMaxTouchPoints>0||p(["@media (",s.join("touch-enabled),("),n,")","{#metromodernizr{top:9px;position:absolute}}"].join(""),function(e){return 9===e.offsetTop})};this.canTransform=!!c(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"]),this.canTransition=d("transitionProperty"),this.canTransform3d=u(),this.canAnimate=d("animationName"),this.canTouch=f(),window.MetroModernizr.canTransform=this.canTransform,window.MetroModernizr.canTransition=this.canTransition,window.MetroModernizr.canTransform3d=this.canTransform3d,window.MetroModernizr.canAnimate=this.canAnimate,window.MetroModernizr.canTouch=this.canTouch,a=null,i=null,o=null,r=null}else this.canTransform=e("html").hasClass("csstransforms"),this.canTransition=e("html").hasClass("csstransitions"),this.canTransform3d=e("html").hasClass("csstransforms3d"),this.canAnimate=e("html").hasClass("cssanimations"),this.canTouch=e("html").hasClass("touch")||"undefined"!=typeof window.navigator.msMaxTouchPoints&&window.navigator.msMaxTouchPoints>0;this.canFlip3d=this.canFlip3d&&this.canAnimate&&this.canTransform&&this.canTransform3d}}(jQuery);