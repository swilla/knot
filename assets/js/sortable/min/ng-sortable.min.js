!function(n){"use strict";window.angular&&window.Sortable?n(angular,Sortable):"function"==typeof define&&define.amd&&define(["angular","./Sortable"],n)}(function(n,e){"use strict";n.module("ng-sortable",[]).constant("version","0.3.7").directive("ngSortable",["$parse",function(t){function o(e){var o=n.element(e).scope(),i=[].filter.call(e.childNodes,function(n){return 8===n.nodeType&&-1!==n.nodeValue.indexOf("ngRepeat:")})[0];if(!i)return null;i=i.nodeValue.match(/ngRepeat:\s*(?:\(.*?,\s*)?([^\s)]+)[\s)]+in\s+([^\s|]+)/);var r=t(i[1]),a=t(i[2]);return{item:function(e){return r(n.element(e).scope())},items:function(){return a(o)}}}var i,r;return{restrict:"AC",scope:{ngSortable:"=?"},link:function(t,a){function l(n,e){var t="on"+n.type.charAt(0).toUpperCase()+n.type.substr(1);s[t]&&s[t]({model:e||f&&f.item(n.item),models:f&&f.items(),oldIndex:n.oldIndex,newIndex:n.newIndex})}function c(e){if(f){var a=e.oldIndex,l=e.newIndex,c=f.items();if(d!==e.from){var u=o(e.from),s=u.items();a=s.indexOf(u.item(e.item)),i=s[a],e.clone?(e.from.removeChild(e.clone),i=n.copy(i)):s.splice(a,1),c.splice(l,0,i),e.from.insertBefore(e.item,r)}else c.splice(l,0,c.splice(a,1)[0]);t.$apply()}}var u,d=a[0],s=t.ngSortable||{},f=o(d),p=[];u=e.create(d,Object.keys(s).reduce(function(n,e){return n[e]=n[e]||s[e],n},{onStart:function(n){r=n.item.nextSibling,l(n),t.$apply()},onEnd:function(n){l(n,i),t.$apply()},onAdd:function(n){c(n),l(n,i),t.$apply()},onUpdate:function(n){c(n),l(n)},onRemove:function(n){l(n,i)},onSort:function(n){l(n)}})),a.on("$destroy",function(){n.forEach(p,function(n){n()}),u.destroy(),p=null,u=null,r=null}),n.forEach(["sort","disabled","draggable","handle","animation","onStart","onEnd","onAdd","onUpdate","onRemove","onSort"],function(n){p.push(t.$watch("ngSortable."+n,function(e){void 0!==e&&(s[n]=e,/^on[A-Z]/.test(n)||u.option(n,e))}))})}}}])});